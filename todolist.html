<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>To-Do List</title>
  <script src="theme.js" defer></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root {
      --bg-color: #ffffff;
      --text-color: #1f2937;
      --accent-color: #ec4899;
      --card-bg: #ffffff;
      --muted-text: #6b7280;
    }
    [data-theme="dark"] {
      --bg-color: #1f2937;
      --text-color: #f3f4f6;
      --accent-color: #f472b6;
      --card-bg: #374151;
      --muted-text: #9ca3af;
    }
    [data-theme="pastel"] {
      --bg-color: #fffafc;
      --text-color: #4b5563;
      --accent-color: #fda4af;
      --card-bg: #ffe4e6;
      --muted-text: #9b9b9b;
    }
    body {
      background-color: var(--bg-color);
      color: var(--text-color);
      font-family: 'Inter', sans-serif;
      transition: background-color 0.3s, color 0.3s;
    }
    .todo-card {
      background-color: var(--card-bg);
      transition: background-color 0.3s, box-shadow 0.3s;
    }
    .todo-card:hover {
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
    }
    .btn-primary {
      background-color: var(--accent-color);
      color: white;
      transition: background-color 0.3s;
    }
    .muted {
      color: var(--muted-text);
    }
  </style>
</head>
<body class="p-6 max-w-4xl mx-auto">

  <div class="flex items-center gap-3 mb-6">
    <svg class="w-10 h-10" viewBox="0 0 100 100" fill="none">
      <path d="M50 20 L55 35 L70 30 L60 45 L75 55 L60 60 L70 75 L55 70 L50 85 L45 70 L30 75 L40 60 L25 55 L40 45 L30 30 L45 35 Z" fill="var(--accent-color)" opacity="0.7"/>
      <circle cx="50" cy="50" r="3" fill="#fff"/>
    </svg>
    <h1 class="text-4xl font-bold" style="color: var(--accent-color);">To-Do List</h1>
  </div>

  <p class="muted mb-6 max-w-xl">Plan your day, track tasks, and stay motivated! Choose a category and make your diary entry.</p>

  <div class="flex flex-col lg:flex-row gap-6">
    <div class="flex-1 space-y-4">
      <div class="flex justify-between items-center gap-3">
        <select id="taskCategory" class="flex-1 px-3 py-2 rounded-xl border border-gray-300 bg-white focus:ring-2 focus:ring-pink-300">
          <option value="">Select Category</option>
          <option value="personal">Personal</option>
          <option value="work">Work</option>
          <option value="fitness">Fitness</option>
          <option value="hobby">Hobby</option>
        </select>
        <input type="time" id="taskTime" class="px-3 py-2 rounded-xl border border-gray-300 bg-white focus:ring-2 focus:ring-pink-300"/>
      </div>

      <input type="text" id="taskTitle" placeholder="Task Title..." class="w-full px-4 py-3 rounded-2xl border border-gray-300 bg-white focus:ring-2 focus:ring-pink-300"/>
      <textarea id="taskDesc" rows="3" placeholder="Task Description (optional)" class="w-full px-4 py-3 rounded-2xl border border-gray-300 bg-white focus:ring-2 focus:ring-pink-300"></textarea>

      <div class="flex gap-3">
        <button id="addTaskBtn" class="flex-1 px-4 py-2 rounded-xl btn-primary hover:opacity-90 transition">Add Task</button>
        <button id="clearTasksBtn" class="flex-1 px-4 py-2 rounded-xl text-white font-medium bg-gray-500 hover:bg-gray-400 transition">Clear All</button>
      </div>
      <div id="taskListWrapper" class="mt-4 max-h-[500px] overflow-y-auto space-y-2">
        <div id="taskList"></div>
      </div>
    </div>

    <div class="w-full lg:w-64 space-y-4">
      <div class="todo-card p-4 rounded-2xl shadow-md space-y-2">
        <h3 class="font-semibold">Tasks Added: <span id="tasksAdded">0</span></h3>
        <h3 class="font-semibold">Tasks Left: <span id="tasksLeft">0</span></h3>
        <h3 class="font-semibold">Tasks Done: <span id="tasksDone">0</span></h3>
      </div>

      <div id="motivationalQuote" class="todo-card p-4 rounded-2xl shadow-md italic text-center transition-opacity duration-500 muted"></div>
    </div>
  </div>

  <script>
    const taskCategory = document.getElementById('taskCategory');
    const taskTime = document.getElementById('taskTime');
    const taskTitle = document.getElementById('taskTitle');
    const taskDesc = document.getElementById('taskDesc');
    const addTaskBtn = document.getElementById('addTaskBtn');
    const clearTasksBtn = document.getElementById('clearTasksBtn');
    const taskList = document.getElementById('taskList');
    const tasksAdded = document.getElementById('tasksAdded');
    const tasksLeft = document.getElementById('tasksLeft');
    const tasksDone = document.getElementById('tasksDone');
    const motivationalQuote = document.getElementById('motivationalQuote');

    let tasks = [];

    const quotes = [
      "🌸 Small steps every day → big changes.",
      "✨ Don’t watch the clock; do what it does — keep going.",
      "🌈 Well done is better than well said.",
      "🌱 Focus on progress, not perfection.",
      "☀️ Every day is a fresh start."
    ];

    function showRandomQuote() {
      motivationalQuote.textContent = quotes[Math.floor(Math.random() * quotes.length)];
    }
    showRandomQuote();
    setInterval(showRandomQuote, 15000);

    function updateStats() {
      tasksAdded.textContent = tasks.length;
      tasksDone.textContent = tasks.filter(t => t.done).length;
      tasksLeft.textContent = tasks.filter(t => !t.done).length;
    }

    function renderTasks() {
      taskList.innerHTML = '';
      tasks.forEach((t, idx) => {
        const div = document.createElement('div');
        div.className = "todo-card p-3 rounded-2xl shadow-md flex items-center justify-between space-x-3";
        div.innerHTML = `
          <div class="flex items-center space-x-3">
            <input type="checkbox" ${t.done ? 'checked' : ''} class="w-5 h-5">
            <div>
              <p class="font-medium">${t.title} <span class="muted text-sm">${t.time}</span></p>
              ${t.desc ? `<p class="muted text-sm">${t.desc}</p>` : ''}
            </div>
          </div>
          <button class="text-red-500 hover:text-red-700">Delete</button>
        `;

        div.querySelector('input[type="checkbox"]').addEventListener('change', e => {
          tasks[idx].done = e.target.checked;
          updateStats();
        });

        div.querySelector('button').addEventListener('click', () => {
          tasks.splice(idx, 1);
          renderTasks();
          updateStats();
        });

        taskList.appendChild(div);
      });
      updateStats();
    }

    addTaskBtn.addEventListener('click', () => {
      if (!taskTitle.value.trim()) { alert("Task title required!"); return; }
      const newTask = {
        title: taskTitle.value.trim(),
        desc: taskDesc.value.trim(),
        category: taskCategory.value,
        time: taskTime.value,
        done: false
      };
      tasks.push(newTask);

      taskTitle.value = '';
      taskDesc.value = '';
      taskTime.value = '';
      taskCategory.value = '';
      renderTasks();
    });

    clearTasksBtn.addEventListener('click', () => {
      if(confirm("Clear all tasks?")) {
        tasks = [];
        renderTasks();
      }
    });

    renderTasks();
  </script>
</body>
</html>
