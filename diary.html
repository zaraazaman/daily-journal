<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Moodboards</title>
  <script src="theme.js" defer></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root {
      --bg-color: #ffffff;
      --text-color: #1f2937;
      --accent-color: #ec4899;
      --card-bg: #ffffff;
    }
    [data-theme="dark"] {
      --bg-color: #1f2937;
      --text-color: #f3f4f6;
      --accent-color: #f472b6;
      --card-bg: #374151;
    }
    [data-theme="pastel"] {
      --bg-color: #fffafc;
      --text-color: #4b5563;
      --accent-color: #fda4af;
      --card-bg: #ffe4e6;
    }
    body {
      background-color: var(--bg-color);
      color: var(--text-color);
      font-family: 'Inter', sans-serif;
      transition: background-color 0.3s, color 0.3s;
    }
    .note-card {
      background-color: var(--card-bg);
      transition: background-color 0.3s, box-shadow 0.3s;
    }
    .note-card:hover {
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
    }
    .btn-primary {
      background-color: var(--accent-color);
      color: white;
    }
  </style>
</head>
<body class="p-6 max-w-4xl mx-auto">

  <div class="flex items-center gap-3 mb-6">
    <svg class="w-10 h-10" viewBox="0 0 100 100" fill="none">
      <rect x="20" y="25" width="60" height="50" rx="10" fill="var(--accent-color)" opacity="0.7"/>
      <path d="M30 35 H70 M30 45 H70 M30 55 H50" stroke="#fff" stroke-width="3" stroke-linecap="round"/>
    </svg>
    <h1 class="text-4xl font-bold" style="color: var(--accent-color);">Notes</h1>
  </div>

  <div class="note-card p-4 rounded-2xl shadow-md space-y-3 mb-6">
    <input type="text" id="noteTitle" placeholder="Give a title to your note"
      class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-pink-300"/>
    <textarea id="noteContent" rows="3" placeholder="Rant here ... or jot down ideas"
      class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-pink-300"></textarea>
    <select id="noteCategory" class="w-full px-4 py-2 rounded-xl border border-gray-300 focus:ring-2 focus:ring-pink-300">
      <option value="">Choose a category (optional)</option>
      <option value="personal">Personal</option>
      <option value="ideas">Ideas</option>
      <option value="school">School</option>
    </select>
    <input type="file" id="noteImage" accept="image/*" class="block text-sm text-gray-600">

    <div class="flex gap-3">
      <button id="addNoteBtn" class="flex-1 px-4 py-2 rounded-xl btn-primary hover:opacity-90 transition">
        Save Note
      </button>
      <button id="clearNotesBtn" class="flex-1 px-4 py-2 rounded-xl text-white font-medium bg-gray-500 hover:bg-gray-400 transition">
        Clear All
      </button>
    </div>
  </div>

  <div id="notesListWrapper" class="space-y-6"></div>

  <div id="emptyState" class="text-center py-10 text-gray-400 hidden">
    <p class="text-lg">No moodboards yet ðŸŽ¨</p>
    <p class="text-sm">Start adding some vibes above!</p>
  </div>

  <script>
    let notes = [];
    let currentFilter = 'all';

    const noteTitle = document.getElementById('noteTitle');
    const noteContent = document.getElementById('noteContent');
    const noteCategory = document.getElementById('noteCategory');
    const noteImage = document.getElementById('noteImage');
    const notesListWrapper = document.getElementById('notesListWrapper');
    const emptyState = document.getElementById('emptyState');

    function renderNotes() {
      notesListWrapper.innerHTML = '';
      if (notes.length === 0) {
        emptyState.classList.remove('hidden');
        return;
      }
      emptyState.classList.add('hidden');

      const grouped = {};
      notes.forEach(note => {
        const cat = note.category || 'uncategorized';
        if (!grouped[cat]) grouped[cat] = [];
        grouped[cat].push(note);
      });

      for (const category in grouped) {
        const groupDiv = document.createElement('div');
        groupDiv.innerHTML = `<h3 class="font-semibold mb-2" style="color: var(--accent-color);">ðŸ“‚ ${category}</h3>`;
        grouped[category].forEach(note => {
          const div = document.createElement('div');
          div.className = "note-card p-4 rounded-2xl shadow-md hover:shadow-lg transition space-y-2";
          div.innerHTML = `
            <h4 class="font-semibold" style="color: var(--accent-color);">${note.title}</h4>
            ${note.image ? `<img src="${note.image}" class="rounded-xl max-h-48 w-full object-cover"/>` : ''}
            <p class="text-sm">${note.content}</p>
            <div class="flex justify-between items-center mt-2 text-xs text-gray-400">
              <span>${new Date(note.date).toLocaleDateString()}</span>
              <button class="text-red-500 hover:text-red-700">Delete</button>
            </div>
          `;
          div.querySelector('button').addEventListener('click', () => {
            notes.splice(notes.indexOf(note), 1);
            renderNotes();
          });
          groupDiv.appendChild(div);
        });
        notesListWrapper.appendChild(groupDiv);
      }
    }

    document.getElementById('addNoteBtn').addEventListener('click', () => {
      if (!noteTitle.value.trim()) { alert("Title required!"); return; }
      const reader = new FileReader();
      const newNote = {
        title: noteTitle.value.trim(),
        content: noteContent.value.trim(),
        category: noteCategory.value,
        date: new Date(),
        image: null
      };

      if (noteImage.files[0]) {
        reader.onload = e => {
          newNote.image = e.target.result;
          notes.push(newNote);
          renderNotes();
        };
        reader.readAsDataURL(noteImage.files[0]);
      } else {
        notes.push(newNote);
        renderNotes();
      }

      noteTitle.value = '';
      noteContent.value = '';
      noteCategory.value = '';
      noteImage.value = '';
    });

    document.getElementById('clearNotesBtn').addEventListener('click', () => {
      if(confirm("Clear all moodboards?")) {
        notes = [];
        renderNotes();
      }
    });

    renderNotes();
  </script>
</body>
</html>
